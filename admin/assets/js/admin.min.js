!function(){"use strict";var t=jQuery,e=(function(){function t(t){this.value=t}function e(e){function i(t,e){return new Promise(function(i,n){var o={key:t,arg:e,resolve:i,reject:n,next:null};r?r=r.next=o:(a=r=o,s(t,e))})}function s(i,a){try{var r=e[i](a),o=r.value;o instanceof t?Promise.resolve(o.value).then(function(t){s("next",t)},function(t){s("throw",t)}):n(r.done?"return":"normal",r.value)}catch(t){n("throw",t)}}function n(t,e){switch(t){case"return":a.resolve({value:e,done:!0});break;case"throw":a.reject(e);break;default:a.resolve({value:e,done:!1})}a=a.next,a?s(a.key,a.arg):r=null}var a,r;this._invoke=i,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),i=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s=function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(s)},n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},r=function(){function t(){e(this,t)}return i(t,null,[{key:"isEnabled",value:function(){return this._enabled=this._enabled||decomGiftable.debug||!1}},{key:"info",value:function(t){this.isEnabled()&&console.info(t)}},{key:"log",value:function(t){this.isEnabled()&&console.log(t)}},{key:"error",value:function(t){this.isEnabled()&&console.error(t)}}]),t}(),o=function(){function s(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=arguments[1],a=arguments[2],o=arguments[3],c=arguments[4],d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];e(this,s),this._parent=i,this._selector=n,this._event=a,this._object=o,this._method=c,this._callback=function(t){d&&(t.preventDefault(),t.stopPropagation()),o[c].apply(o,arguments)},t(this._parent).on(this._event,this._selector,this._callback),r.info("Bound - parent: "+this._parent+", event: "+this._event+", selector: "+this._selector+", object: "+o+", method: "+c),r.log("Parent:"),r.log(this._parent),r.log("Object:"),r.log(o)}return i(s,[{key:"unbind",value:function(){t(this._parent).off(this._event,this._selector,this._callback),r.info("Unbound - parent: "+this._parent+", event: "+this._event+", selector: "+this._selector),r.log("Parent:"),r.log(this._parent)}},{key:"selector",value:function(){return this._selector}}]),s}(),c=function(){function t(i){e(this,t),this._data=i,this._bound=new Array,this._bindings=new Array,this.init()}return i(t,[{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){var t=this;this._bindings.forEach(function(e,i,s){t._bound.push(new o(t._element,e.selector,e.event,e.object,e.method,e.preventDefault||!0))})}}]),t}(),d=function(){function t(){e(this,t)}return i(t,null,[{key:"loadTranslations",value:function(){this._translations=this._translations||decomGiftable.screen.translations||new Object}},{key:"text",value:function(t){return this.loadTranslations(),this._translations[t]||t}}]),t}(),l=function(){function s(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e(this,s),this._id=t,this._conditions=n,this._type=n.type||null,this._currentStep=0,this._subcriteria=new Map,this._subcriteriaLastIndex=-1,this._conditions.subcriteria){var r=this._conditions.subcriteria[this._conditions.subcriteria.length-1].id;this._subcriteriaLastIndex=parseInt(r.substring(r.lastIndexOf("-")+1))}this._logic=n.logic||null,this._scrollTo=n.scrollTo||!1,this._checks_out=!1,this._$element=null,this._bound=new Array,this._steps=new Array,this._sourceCriteria=a,this._selectTypeElementId="dgfw_criteria_choose_type_"+this._id,this._$selectTypeElement=null,this._elementData={tag:"div",id:"dgfw_criteria_"+this._id,classes:["dgfw-criteria"]},this._descriptionData={tag:"div",id:"dgfw_criteria_description_"+this._id,classes:["dgfw-criteria-description"]},this._types=new Map([["amounts",d.text("Amounts")],["items",d.text("Items")],["products",d.text("Products")],["product_categories",d.text("Product Categories")],["periods",d.text("Time Period")],["users",d.text("Users")],["user_roles",d.text("User Roles")]]),this._chooseTypeData={tag:"div",id:"dgfw_choose_type_wrap_"+this._id,classes:["dgfw-choose-type-container"],children:[{tag:"select",id:this._selectTypeElementId,classes:["dgfw-select-type"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][type]"},children:[]}]},this._types.forEach(function(t,e,s){var n={tag:"option",attributes:{value:e},text:t};i._type===e&&(n.attributes.selected="selected"),i._chooseTypeData.children[0].children.push(n)}),this._stepListContainerData={tag:"div",id:"dgfw_step_list_container_"+this._id,classes:["dgfw-criteria-step-list-container"],children:[]},this._stepListData={tag:"ul",id:"dgfw_step_list_"+this._id,classes:["dgfw-criteria-step-list","current-step-0"],children:[]},this._navigationData={tag:"div",id:"dgfw_criteria_nav_"+this._id,classes:["dgfw-criteria-nav"],children:[{tag:"button",id:"dgfw_prev_step_"+this._id,classes:["button","dgfw-button","dgfw-prev-step","dashicons-before","dashicons-arrow-left-alt"],text:d.text("Back"),attributes:{disabled:"disabled"}},{tag:"button",id:"dgfw_next_step_"+this._id,classes:["button","dgfw-button","dgfw-next-step","dashicons-after","dashicons-arrow-right-alt"],text:d.text("Next")}]},this._removeData={tag:"button",id:"dgfw_criteria_remove_"+this._id,classes:["dgfw-criteria-remove","dgfw-button","dashicons-before","dashicons-no"],text:d.text("Remove")};var o={tag:"button",id:"dgfw_add_and_"+this._id,classes:["button","dgfw-button","dgfw-add-and","dashicons-before","dashicons-warning"],text:d.text("AND")},c={tag:"button",id:"dgfw_add_or_"+this._id,classes:["button","dgfw-button","dgfw-add-or","dashicons-before","dashicons-editor-help"],text:d.text("OR")};this._andOrData={tag:"div",id:"dgfw_criteria_add_subcriteria_"+this._id,classes:["dgfw-subcriteria-add"],children:[]},this._logic?"OR"===this._logic?this._andOrData.children.push(o):this._andOrData.children.push(c):this._conditions.subcriteria&&this._conditions.subcriteria.length?"OR"===this._conditions.subcriteria[0].logic?this._andOrData.children.push(c):this._andOrData.children.push(o):this._andOrData.children=[o,c],this._chooseTypeData.children.push({method:"chooseType",description:d.text("Choose condition type:"),elements:[{tag:"select",id:this._selectTypeElementId,classes:["dgfw-select-type"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][type]"},children:[]}]}),this._bindings=[{selector:"#dgfw_next_step_"+this._id,event:"click",object:this,method:"showNextStep"},{selector:"#dgfw_prev_step_"+this._id,event:"click",object:this,method:"showPrevStep"},{selector:"#dgfw_add_and_"+this._id,event:"click",object:this,method:"addSubcriteriaAnd"},{selector:"#dgfw_add_or_"+this._id,event:"click",object:this,method:"addSubcriteriaOr"},{selector:"#dgfw_criteria_remove_"+this._id,event:"click",object:this,method:"removeCriteria"},{selector:"#dgfw_criteria_remove_"+this._id,event:"mouseover",object:this,method:"addHighlight"},{selector:"#dgfw_criteria_remove_"+this._id,event:"mouseout",object:this,method:"removeHighlight"},{selector:".dgfw-step-description.has-help",event:"click",object:this,method:"toggleStepHelp"}],this.init()}return i(s,[{key:"init",value:function(){this.hideNavigation(),this._lastStep=this._steps.length-1,this._bindings.push({selector:"#"+this._selectTypeElementId,event:"change",object:this,method:"changeType"}),this.bind(),this._steps.length>1&&this.showNavigation()}},{key:"takeOverFromSource",value:function(){var t=this;this._currentStep=this._sourceCriteria._currentStep,this._subcriteria=this._sourceCriteria._subcriteria,this._subcriteriaLastIndex=this._sourceCriteria._subcriteriaLastIndex,this._logic=this._sourceCriteria._logic,this._checksOut=this._sourceCriteria._checksOut,this._$element=this._sourceCriteria._$element,this._$description=this._sourceCriteria._$description,this._$stepListContainer=this._sourceCriteria._$stepListContainer,this._sourceCriteria._$stepList.attr("id",this._sourceCriteria._$stepList.attr("id")+"_old"),this._$stepList=this.createAndAppendChild(this._$stepListContainer,this._stepListData),this._$navigation=this._sourceCriteria._$navigation,this._$andOr=this._sourceCriteria._$andOr,this._steps=this._sourceCriteria._steps,this._selectTypeElementId=this._sourceCriteria._selectTypeElementId,this._$selectTypeElement=this._sourceCriteria._$selectTypeElement,this._$removeButton=this._sourceCriteria._$removeButton,this._sourceCriteria._bound.forEach(function(t,e,i){t.unbind()}),this._subcriteria.forEach(function(e,i,s){t._bound.push(new o(t._$element,e.elementSelector(),e.changeTypeEvent(),t,"changeCriteriaType")),t._bound.push(new o(t._$element,e.elementSelector(),e.removeEvent(),t,"removeSubcriteria"))}),this._currentStep=0}},{key:"createElement",value:function(){var e=this;this._$element=t(document.createElement(this._elementData.tag)),this._$element.attr("id",this._elementData.id),this._$element.addClass(this._elementData.classes.join(" ")),this._scrollTo&&this._$element.addClass("invisible"),this._elementData.children&&this._elementData.children.forEach(function(t,i,s){e.createAndAppendChild(e._$element,t)}),this._$description=this.createAndAppendChild(this._$element,this._descriptionData),this.createAndAppendChild(this._$element,this._chooseTypeData),this._$stepListContainer=this.createAndAppendChild(this._$element,this._stepListContainerData),this._$stepList=this.createAndAppendChild(this._$stepListContainer,this._stepListData),this._$navigation=this.createAndAppendChild(this._$element,this._navigationData),this._$removeButton=this.createAndAppendChild(this._$element,this._removeData),this._$andOr=this.createAndAppendChild(this._$element,this._andOrData),this.setElementDescription(d.text(this._logic||"First condition")),this._$element.addClass(this._logic?this._logic.toLowerCase():"first"),this._logic&&this.createAndAppendChild(this._$element,this.logicElement()),this.createAndAppendChild(this._$element,this.idElement()),this._scrollTo&&setTimeout(function(){e._$element.removeClass("invisible");var i=e._$element.offset().top;t("html, body").animate({scrollTop:i-100},1e3)},10)}},{key:"logicElement",value:function(){return{tag:"input",id:"dgfw_criteria_logic_"+this._id,attributes:{type:"hidden",name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][logic]",value:this._logic}}}},{key:"idElement",value:function(){return{tag:"input",id:"dgfw_criteria_id_"+this._id,attributes:{type:"hidden",name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][id]",value:this._id}}}},{key:"createAndAppendChild",value:function(e,i){var s=this,n=t(document.createElement(i.tag));if(n.attr("id",i.id),i.classes&&n.addClass(i.classes.join(" ")),i.attributes)for(var a in i.attributes)n.attr(a,i.attributes[a]);return i.text&&n.text(i.text),i.html&&n.html(i.html),e.append(n),i.children&&i.children.forEach(function(t,e,i){s.createAndAppendChild(n,t)}),n}},{key:"bind",value:function(){var t=this;this._bindings.forEach(function(e,i,s){t._bound.push(new o(t._$element,e.selector,e.event,e.object,e.method))})}},{key:"incrementStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._currentStep+=t,this._currentStep>this._lastStep&&(this._currentStep=this._lastStep),this._$stepList.find(".step-"+(this._currentStep-1)).removeClass("step-current").addClass("step-prev"),this._$stepList.find(".step-"+this._currentStep).addClass("step-current")}},{key:"decrementStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._currentStep-=t,this._currentStep<0&&(this._currentStep=0),this._$stepList.find(".step-"+(this._currentStep+1)).removeClass("step-current"),this._$stepList.find(".step-"+this._currentStep).removeClass("step-prev").addClass("step-current")}},{key:"showNextStep",value:function(){this.incrementStep(),r.info("next, to step:"+this._currentStep),this.currentStep()}},{key:"showPrevStep",value:function(){this.decrementStep(),r.info("prev, to step:"+this._currentStep),this.currentStep()}},{key:"currentStep",value:function(){if(this.readjustSize(),this._steps.length>1){var t=0===this._currentStep;this._$navigation.find("button.dgfw-prev-step").text(this.prevStepButtonText()).prop("disabled",t);var e=this._currentStep===this._lastStep;this._$navigation.find("button.dgfw-next-step").text(this.nextStepButtonText()).prop("disabled",e)}this._steps[this._currentStep].method&&this[this._steps[this._currentStep].method]()}},{key:"readjustSize",value:function(){this._$stepListContainer.height(this._$stepList.find("li.step-"+this._currentStep+" > .dgfw-criteria-step-wrapper").height()+70)}},{key:"id",value:function(){return this._id}},{key:"element",value:function(){return this._$element}},{key:"conditions",value:function(){return this._conditions}},{key:"elementSelector",value:function(){return"#"+this._elementData.id}},{key:"changeTypeEvent",value:function(){return"DGFW.CriteriaChangeType_"+this._id}},{key:"removeEvent",value:function(){return"DGFW.CriteriaRemove_"+this._id}},{key:"setElementDescription",value:function(t){this._$description.text(t)}},{key:"description",value:function t(){var t=this._logic?d.text(this._logic):"";return t+=" "+this.generateDescription()}},{key:"generateDescription",value:function(){return this._type}},{key:"addSubcriteriaAnd",value:function(){this.addSubcriteria("AND"),this._$andOr.find("button.dgfw-add-or").hide()}},{key:"addSubcriteriaOr",value:function(){this.addSubcriteria("OR"),this._$andOr.find("button.dgfw-add-and").hide()}},{key:"addSubcriteria",value:function(t){var e=this._id+"-subcriteria-"+this.newSubcriteriaIndex(),i=$.createAndScrollTo(e,"amounts",{logic:t});this._subcriteria.set(e,i),this._$element.hasClass("first")&&this._$element.addClass(t.toLowerCase()),this.appendSubcriteriaElement(i.element()),this._bound.push(new o(this._$element,i.elementSelector(),i.changeTypeEvent(),this,"changeCriteriaType")),this._bound.push(new o(this._$element,i.elementSelector(),i.removeEvent(),this,"removeSubcriteria"))}},{key:"newSubcriteriaIndex",value:function(){return++this._subcriteriaLastIndex}},{key:"appendSubcriteriaElement",value:function(t){this._$andOr.before(t)}},{key:"chooseType",value:function(){r.info("choose type"),r.log(this),this._$navigation.find(".dgfw-prev-step").attr("disabled",!0)}},{key:"changeType",value:function(){this._$selectTypeElement=this._$selectTypeElement||t(document.getElementById(this._selectTypeElementId)),this._type!==this._$selectTypeElement.val()&&(this._$element.trigger(this.changeTypeEvent(),[this._id.toString(),this._$selectTypeElement.val()]),r.info("change type to: "+this._$selectTypeElement.val()),r.log(this))}},{key:"changeCriteriaType",value:function(t,e,i){this._subcriteria.set(e,new $.createFrom(this._subcriteria.get(e),i))}},{key:"showType",value:function(){r.info("show type: "+this._type),r.log(this)}},{key:"stepElementsExist",value:function(t){return this._sourceCriteria&&this._sourceCriteria._steps[t]&&this._sourceCriteria._steps[t].elements}},{key:"removeStepElements",value:function(e){var i=this;this._sourceCriteria._steps[e].elements.forEach(function(s,n,a){r.info("Removed: "+s.id),t(document.getElementById("dgfw_criteria_"+i._sourceCriteria.id()+"_step_"+e)).fadeOut().remove()})}},{key:"showNavigation",value:function(){this._$navigation.removeClass("invisible").find("button").prop("disabled",!1);var t=0===this._currentStep;this._$navigation.find("button.dgfw-prev-step").text(this.prevStepButtonText()).prop("disabled",t);var e=this._currentStep===this._lastStep;this._$navigation.find("button.dgfw-next-step").text(this.nextStepButtonText()).prop("disabled",e)}},{key:"hideNavigation",value:function(){this._$navigation.addClass("invisible").find("button").prop("disabled",!0)}},{key:"showCriteria",value:function(){var t=this;if(this._sourceCriteria||this.createElement(),this._steps.forEach(function(e,i,s){i<t._currentStep||(e.help&&e.elements.unshift({tag:"div",id:"dgfw_criteria_"+t._id+"_step"+i+"_help",classes:["dgfw-step-help"],html:e.help}),e.description&&e.elements.unshift({tag:"h4",id:"dgfw_criteria_"+t._id+"_step_"+i+"_description",classes:["dgfw-step-description",e.help?"has-help":""],text:e.description}),t.createAndAppendChild(t._$stepList,{tag:"li",id:"dgfw_criteria_"+t._id+"_step_"+i,classes:["dgfw-criteria-step","step-"+i,0===i?"step-current":""],children:[{tag:"div",id:"dgfw_criteria_"+t._id+"_step_wrapper"+i,classes:["dgfw-criteria-step-wrapper"],children:e.elements}]}))}),this._sourceCriteria){var e=this._sourceCriteria,i=this;setTimeout(function(){i._$stepListContainer.height(i._$stepList.find("li.step-0 > .dgfw-criteria-step-wrapper").height()+60),i._$stepListContainer.addClass("transition"),setTimeout(function(){e._$stepList.remove(),i._$stepListContainer.removeClass("transition"),i._sourceCriteria=!0},800)},100)}else setTimeout(function(){t.readjustSize()},10);this._conditions.subcriteria&&(this._conditions.subcriteria.forEach(function(e,i,s){var n=new $.create(e.id,e.type,e);t._subcriteria.set(e.id,n),t._$element.hasClass("first")&&t._$element.addClass(e.logic.toLowerCase()),t.appendSubcriteriaElement(n.element()),t._bound.push(new o(t._$element,n.elementSelector(),n.changeTypeEvent(),t,"changeCriteriaType")),t._bound.push(new o(t._$element,n.elementSelector(),n.removeEvent(),t,"removeSubcriteria"))}),this._conditions.subcriteria=void 0)}},{key:"removeElement",value:function(){var t=this;this._$element.css({height:this._$element.height()}),this._$element.slideUp(350,function(){t._$element.remove()})}},{key:"removeCriteria",value:function(){var t=this;confirm(d.text("Are you sure you want do remove this condition and all its child conditions?"))&&this._$element.animate({opacity:0},350,function(){t._$element.trigger(t.removeEvent(),[t._id.toString()])})}},{key:"addHighlight",value:function(){this._$element.addClass("highlight")}},{key:"removeHighlight",value:function(){this._$element.removeClass("highlight")}},{key:"removeSubcriteria",value:function(t,e){var i=this._subcriteria.get(e);this._subcriteria.delete(e),i.removeElement(),this.unbindSelector(i.elementSelector()),this._$element.hasClass("first")&&!this._subcriteria.size&&(this._$element.removeClass("and or"),this._$andOr.find("button").show())}},{key:"unbindSelector",value:function(t){var e=new Array;this._bound.forEach(function(i,s){i.selector()===t?i.unbind():e.push(i)}),this._bound=e}},{key:"prevStepButtonText",value:function(){var t;return t=this._currentStep>0?this._currentStep-1:this._currentStep,this._steps[t].stepName||d.text("Back")}},{key:"nextStepButtonText",value:function(){var t;return t=this._currentStep<this._lastStep?this._currentStep+1:this._currentStep,this._steps[t].stepName||d.text("Next")}},{key:"toggleStepHelp",value:function(e){var i=this,s=t(e.currentTarget),n=s.siblings(".dgfw-step-help");n.is(":visible")?n.slideUp(185):n.slideDown(185),setTimeout(function(){i.readjustSize()},185)}}]),s}(),h=function(){function s(t,i){e(this,s),this._id=t,this._value,this._elements,this._inputElementId,this._$inputElement,this._options=i,this._bindings=new Array,this.init()}return i(s,[{key:"init",value:function(){}},{key:"hookElements",value:function(){this._$inputElement=this._$inputElement||t(document.getElementById(this._inputElementId))}},{key:"elements",value:function(){return this._elements}},{key:"id",value:function(){return this._id}},{key:"elementId",value:function(){return this._inputElementId}},{key:"bindings",value:function(){return this._bindings}}]),s}(),u=function(r){function o(){return e(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),i(o,[{key:"init",value:function(){this._currency=this._options.currency,this._label=this._options.label,this._inputElementId="dgfw_criteria_amount_"+this._id,this._currencyElementId="dgfw_criteria_amount_currency_"+this._id,this._prefixElementId="dgfw_criteria_amount_prefix_"+this._id,this._$prefixElement=null,this._value=this._options.value;var t={tag:"span",id:this._prefixElementId,classes:["dgfw-currency","dgfw-currency-amount"],text:this._currency.symbol};this._elements=[{tag:"label",id:"dgfw_criteria_amount_label_"+this._id,classes:["dgfw-label","dgfw-label-amount"],text:this._label,attributes:{for:this._inputElementId}}],"left"!==this._currency.position&&"left_space"!==this._currency_position||(t.classes.push("left"),this._elements.push(t)),this._elements.push({tag:"input",id:this._inputElementId,classes:["dgfw-amount"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",type:"number",step:"0.01",value:this._value}}),"right"!==this._currency.position&&"right_space"!==this._currency_position||(t.classes.push("right"),this._elements.push(t)),this._elements.push({tag:"input",id:this._currencyElementId,classes:["dgfw-amount"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][currency]",type:"hidden",value:this._currency.text}}),s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this)}},{key:"hookElements",value:function(){s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"hookElements",this).call(this),this._$prefixElement=this._$prefixElement||t(document.getElementById(this._prefixElementId)),this._$currencyElement=this._$currencyElement||t(document.getElementById(this._currencyElementId))}},{key:"changeCurrencyTo",value:function(t){this.hookElements(),this._currency=t,this._$prefixElement.text(this._currency.symbol),this._$currencyElement.val(t.text)}},{key:"validate",value:function(){this.hookElements();var t=parseFloat(this._$inputElement.val()),e=!1;return this._value=t,e=!0,this.format(),e}},{key:"value",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&(this._value=parseFloat(t),this.format()),this._value}},{key:"setMin",value:function(t){this.hookElements(),this._minValue=parseFloat(t),this._$inputElement.attr("min",this._minValue),this._minValue>this._value&&this.value(this._minValue)}},{key:"setMax",value:function(t){this.hookElements(),this._maxValue=parseFloat(t),this._$inputElement.attr("max",this._maxValue),this._maxValue<this._value&&this.value(this._maxValue)}},{key:"format",value:function(){this.hookElements();var t=2,e=999,i="\\d(?=(\\d{"+(e||3)+"})+"+(t>0?"\\.":"$")+")",s=this._value.toFixed(Math.max(0,~~t)).replace(new RegExp(i,"g"),"$&,");this._$inputElement.val(s)}}]),o}(h),_=function(r){function o(){return e(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),i(o,[{key:"init",value:function(){this._type="amounts",this._sourceCriteria&&this.takeOverFromSource(),this._currency=decomGiftable.screen.data.currency,this._minAmount=new u(this._id+"-min_amount",{currency:this._currency,label:d.text("Min amount"),value:this._conditions.min_amount?this._conditions.min_amount.value:0}),this._maxAmount=new u(this._id+"-max_amount",{currency:this._currency,label:d.text("Max amount"),value:this._conditions.max_amount?this._conditions.max_amount.value:0}),this._steps=new Array,this._steps[0]={description:d.text("Set amount range. Leave empty for no limits."),help:d.text("This condition will be met if the <strong>total cart amount</strong> is within the defined min/max amounts range."),elements:[{tag:"div",id:"dgfw_criteria_amounts_min_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._minAmount.elements()},{tag:"div",id:"dgfw_criteria_amounts_max_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._maxAmount.elements()}]},this.showCriteria(),this._bindings.push({selector:"#"+this._minAmount.elementId(),event:"focusout",object:this,method:"updateMinAmount"},{selector:"#"+this._maxAmount.elementId(),event:"focusout",object:this,method:"updateMaxAmount"}),s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this)}},{key:"changeCurrency",value:function(){this._$currencySelect||(this._$currencySelect=t(document.getElementById(this._currencySelectId))),this._currency=this._currencies.get(this._$currencySelect.val()),this._minAmount.changeCurrencyTo(this._currency),this._maxAmount.changeCurrencyTo(this._currency)}},{key:"updateMinAmount",value:function(){this._minAmount.validate()}},{key:"updateMaxAmount",value:function(){this._maxAmount.validate()}}]),o}(l),p=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._label=this._options.label,this._inputElementId="dgfw_criteria_items_"+this._id,this._value=this._options.value,this._elements=[{tag:"label",id:"dgfw_criteria_items_label_"+this._id,classes:["dgfw-label","dgfw-label-items"],text:this._label,attributes:{for:this._inputElementId}},{tag:"input",id:this._inputElementId,classes:["dgfw-items"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",type:"number",step:"1",value:this._value}}],s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}},{key:"validate",value:function(){this.hookElements();var t=parseFloat(this._$inputElement.val()),e=!1;return t>=this._minValue&&t<=this._maxValue&&(this._value=t,e=!0),this.format(),e}},{key:"value",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&(this._value=parseFloat(t),this.format()),this._value}},{key:"setMin",value:function(t){this.hookElements(),this._minValue=parseFloat(t),this._$inputElement.attr("min",this._minValue),this._minValue>this._value&&this.value(this._minValue)}},{key:"setMax",value:function(t){this.hookElements(),this._maxValue=parseFloat(t),this._$inputElement.attr("max",this._maxValue),this._maxValue<this._value&&this.value(this._maxValue)}},{key:"format",value:function(){this.hookElements();var t=0,e=3,i="\\d(?=(\\d{"+(e||3)+"})+"+(t>0?"\\.":"$")+")",s=this._value.toFixed(Math.max(0,~~t)).replace(new RegExp(i,"g"),"$&,");this._$inputElement.val(s)}}]),r}(h),m=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="items",this._sourceCriteria&&this.takeOverFromSource(),this._minItems=new p(this._id+"-min_items",{label:d.text("Min items"),value:this._conditions.min_items?this._conditions.min_items.value:0}),this._maxItems=new p(this._id+"-max_items",{label:d.text("Max items"),value:this._conditions.max_items?this._conditions.max_items.value:0}),this._steps=new Array,this._steps[0]={description:d.text("Set items range. Leave empty for no limits."),help:d.text("This condition will be met if the <strong>total number of items in cart</strong> is within the defined min/max items range."),elements:[{tag:"div",id:"dgfw_criteria_items_min_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._minItems.elements()},{tag:"div",id:"dgfw_criteria_items_max_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._maxItems.elements()}]},this.showCriteria(),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}},{key:"updateMinItems",value:function(){this._minItems.validate()&&(this._maxItems.setMin(this._minItems.value()),this._minItems.value()>this._maxItems.value()&&this._maxItems.value(this._minItems.value()))}},{key:"updateMaxItems",value:function(){this._maxItems.validate()&&this._minItems.setMax(this._maxItems.value())}}]),r}(l),g=function(o){function c(){return e(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return n(c,o),i(c,[{key:"init",value:function(){var e=this;this._postType=this._options.postType,this._label=this._options.label,this._inputElementId="dgfw_criteria_posts_"+this._id,this._containerId="dgfw_critera_posts_select_"+this._id,this._selectedListId="dgfw_criteria_posts_"+this._id+"_selected_list",this._advancedContainerId="dgfw_criteria_posts_advanced_settings_"+this._id,this._advancedListId="dgfw_criteria_posts_"+this._id+"_advanced_list",this._navPrevId="dgfw_criteria_posts_select_nav_prev_"+this._id,this._navNextId="dgfw_criteria_posts_select_nav_next_"+this._id,this._statusCurrentPageId="dgfw_criteria_posts_select_nav_status_current_"+this._id,this._statusTotalPagesId="dgfw_criteria_posts_select_nav_status_total_"+this._id,this._value=new Object,this._options.value&&(this._value=this._options.value),this._currentPage=0,this._totalProducts=0,this._totalPages=1,this._productsPerPage=t(window).width()>1023?5:3;var i=new Array;decomGiftable.screen.data.products&&(this._totalProducts=decomGiftable.screen.data.products.length,this._totalPages=Math.ceil(this._totalProducts/this._productsPerPage),decomGiftable.screen.data.products.forEach(function(t,s,n){i[Math.floor(s/e._productsPerPage)]=i[Math.floor(s/e._productsPerPage)]||new Array,i[Math.floor(s/e._productsPerPage)].push(e.productElement(t))}));var n=new Array;i.forEach(function(t,i,s){n[i]={tag:"div",id:e._containerId+"_page_"+i,classes:["dgfw-select-posts-container-page","page-"+i,0===i?"page-current":""],children:t}});var a={tag:"div",id:this._selectedListId,classes:["dgfw-selected-posts"],children:[]},r={tag:"div",id:this._advancedListId,classes:["dgfw-advanced-posts"],children:[]};if(Object.keys(this._value).length)for(var o in this._value){var l=this.post(parseInt(o));this._value[o]&&l&&(a.children.push(this.selectedProductElement(l,!1)),r.children.push(this.advancedProductElement(l,this._value[o])))}else a.classes.push("invisible");this._elements=[a,{tag:"div",id:this._containerId,classes:["dgfw-select-wrapper","dgfw-select-posts","current-page-0"],children:n},{tag:"input",id:this._inputElementId,classes:["dgfw-products"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",type:"hidden",value:Object.keys(this._value).join(",")}},{tag:"input",id:this._inputElementId+"_post_types",classes:["dgfw-products"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][post_types][]",type:"hidden",value:this._postType}}],this._totalPages>1&&this._elements.splice(1,0,{tag:"div",id:"dgfw_criteria_posts_select_nav_"+this._id,classes:["dgfw-select-posts-nav"],children:[{tag:"button",id:this._navPrevId,classes:["dgfw-select-posts-nav-prev","button","dgfw-button-secondary","dashicons-before","dashicons-arrow-left"]},{tag:"span",id:"dgfw_criteria_select_nav_status_"+this._id,classes:["dgfw-select-posts-nav-status"],children:[{tag:"span",id:"",classes:[],text:d.text("Page ")},{tag:"span",id:this._statusCurrentPageId,classes:["dgfw-select-posts-nav-status-number"],text:this._currentPage+1},{tag:"span",id:"",classes:[],text:d.text(" of ")},{tag:"span",id:this._statusTotalPagesId,classes:["dgfw-select-posts-nav-status-number"],
text:this._totalPages}]},{tag:"button",id:this._navNextId,classes:["dgfw-select-posts-nav-prev","button","dgfw-button-secondary","dashicons-before","dashicons-arrow-right"]}]}),this._advancedElements=[{tag:"div",id:this._advancedContainerId,classes:["dgfw-advanced-wrapper"],children:[r]}],this._bindings.push({selector:"#"+this._containerId,event:"mouseover",object:this,method:"loadNextPage"},{selector:"#"+this._navPrevId,event:"click",object:this,method:"previousPage"},{selector:"#"+this._navNextId,event:"click",object:this,method:"nextPage"},{selector:".dgfw-posts-select-post",event:"click",object:this,method:"toggleSelectPost"},{selector:".dgfw-posts-selected-remove",event:"click",object:this,method:"removeSelectedPost"}),s(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"init",this).call(this)}},{key:"hookElements",value:function(){s(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"hookElements",this).call(this),this._$containerElement=this._$containerElement||t(document.getElementById(this._containerId)),this._$selectedListElement=this._$selectedListElement||t(document.getElementById(this._selectedListId)),this._$currentPageStatus=this._$currentPageStatus||t(document.getElementById(this._statusCurrentPageId)),this._$advancedListElement=this._$advancedListElement||t(document.getElementById(this._advancedListId))}},{key:"containerId",value:function(){return this._containerId}},{key:"loadNextPage",value:function(){this.hookElements(),r.info("Loading more products...")}},{key:"productElement",value:function(t){var e=["dgfw-posts-select-post"];return this._value[t.id]&&e.push("selected"),{tag:"div",id:"dgfw_criteria_posts_"+this._id+"_product_"+t.id,classes:e,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-posts-select-post-title"],text:t.title.length<30?t.title:t.title.slice(0,30)+"…"},{tag:"div",classes:["dgfw-posts-select-post-img"],attributes:{style:"background-image: url("+t.img+");"}}]}}},{key:"selectedProductElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=["dgfw-posts-selected-post"];return e&&i.push("invisible"),{tag:"div",id:"dgfw_criteria_posts_"+this._id+"_selected_"+t.id,classes:i,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-posts-select-post-title"],text:t.title.length<30?t.title:t.title.slice(0,30)+"…"},{tag:"div",classes:["dgfw-posts-select-post-img"],attributes:{style:"background-image: url("+t.img+");"}},{tag:"span",id:"dgfw_criteria_posts_selected_remove_"+t.id,classes:["dgfw-posts-selected-remove","dashicons-before","dashicons-no"],attributes:{"data-decom-id":t.id}}]}}},{key:"advancedProductMinItemsInputId",value:function(t){return"dgfw_criteria_posts_advanced_min_items_"+t}},{key:"advancedProductElement",value:function(t,e){var i=["dgfw-posts-advanced-post"],s=this.advancedProductMinItemsInputId(t.id);return{tag:"div",id:"dgfw_criteria_posts_"+this._id+"_advanced_"+t.id,classes:i,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-posts-select-post-title"],text:t.title.length<20?t.title:t.title.slice(0,40)+"…"},{tag:"div",classes:["dgfw-posts-select-post-img"],attributes:{style:"background-image: url("+t.img+");"}},{tag:"span",id:"dgfw_criteria_posts_advanced_remove_"+t.id,classes:["dgfw-posts-selected-remove","dashicons-before","dashicons-no"],attributes:{"data-decom-id":t.id}},{tag:"input",id:s,classes:["dgfw-posts-advanced-min-items"],attributes:{type:"number",name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]["+t.id+"][min_items]",value:e.min_items}}]}}},{key:"toggleSelectPost",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.data("decom-id"));i.toggleClass("selected"),this._value[s]?(delete this._value[s],this.removeFromList(s)):(this._value[s]={min_items:1},this.addToList(s)),this._$inputElement.val(Object.getOwnPropertyNames(this._value).join(","))}},{key:"removeSelectedPost",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.data("decom-id"));i=t("#dgfw_criteria_posts_"+this._id+"_product_"+s),i.removeClass("selected"),this._value[s]&&(delete this._value[s],this.removeFromList(s))}},{key:"addToList",value:function(t){var e=this,i=this.post(t);this.createAndAppendChild(this._$selectedListElement,this.selectedProductElement(i)),this.createAndAppendChild(this._$advancedListElement,this.advancedProductElement(i,{min_items:1})),setTimeout(function(){e._$selectedListElement.removeClass("invisible"),e.$postElement(t).removeClass("invisible"),setTimeout(function(){e.selectionChanged()},200)},50)}},{key:"removeFromList",value:function(t){var e=this,i=this.$postElement(t),s=this.$advancedPostElement(t);i.addClass("invisible"),setTimeout(function(){0===Object.keys(e._value).length&&e._$selectedListElement.addClass("invisible"),i.remove(),s.remove(),setTimeout(function(){e.selectionChanged()},200)},50)}},{key:"selectionChangedEvent",value:function(){return"DGFW.SelectionChanged_"+this._id}},{key:"selectionChanged",value:function(){this._$inputElement.trigger(this.selectionChangedEvent())}},{key:"post",value:function(t){var e=!1;return decomGiftable.screen.data.products.forEach(function(i,s,n){i.id===t&&(e=i)}),e}},{key:"$postElement",value:function(e){return t(document.getElementById("dgfw_criteria_posts_"+this._id+"_selected_"+e))}},{key:"$advancedPostElement",value:function(e){return t(document.getElementById("dgfw_criteria_posts_"+this._id+"_advanced_"+e))}},{key:"createAndAppendChild",value:function(e,i){var s=this,n=t(document.createElement(i.tag));if(n.attr("id",i.id),i.classes&&n.addClass(i.classes.join(" ")),i.attributes)for(var a in i.attributes)n.attr(a,i.attributes[a]);return i.text&&n.text(i.text),e.append(n),i.children&&i.children.forEach(function(t,e,i){s.createAndAppendChild(n,t)}),n}},{key:"previousPage",value:function(){this.hookElements(),this._currentPage-=this._currentPage>0?1:0,this._$containerElement.find(".page-"+(this._currentPage+1)).removeClass("page-current"),this._$containerElement.find(".page-"+this._currentPage).removeClass("page-prev").addClass("page-current"),this.updateCurrentPageStatus()}},{key:"nextPage",value:function(){this.hookElements(),this._currentPage+=this._currentPage<this._totalPages-1?1:0,this._$containerElement.find(".page-"+(this._currentPage-1)).removeClass("page-current").addClass("page-prev"),this._$containerElement.find(".page-"+this._currentPage).addClass("page-current"),this.updateCurrentPageStatus()}},{key:"updateCurrentPageStatus",value:function(){this.hookElements(),this._$currentPageStatus.text(this._currentPage+1)}},{key:"advancedElements",value:function(){return this._advancedElements}}]),c}(h),v=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="products",this._sourceCriteria&&this.takeOverFromSource(),this._products=new g(this._id+"-posts",{label:d.text("Posts"),postType:"product",value:!!this._conditions.posts&&this._conditions.posts.value}),this._steps=new Array;var t=this._products.elements(),e=this._products.advancedElements();this._steps[0]={stepName:d.text("Select Products"),description:d.text("Select products this gift category applies for."),help:d.text("This condition will be met if the customer has at least one item of any of the selected products in their cart. To specify minimum quantity for each selected product, click the <strong>Product Quantities</strong> button below."),elements:[{tag:"div",id:"dgfw_criteria_products_container_"+this._id,classes:["dgfw-criteria-input-container"],children:t}]},this._steps[1]={stepName:d.text("Product Quantities"),description:d.text("Set minimum quantity for each selected product."),elements:[{tag:"div",id:"dgfw_criteria_products_advanced_"+this._id,classes:["dgfw-criteria-input-container"],children:e}]},this.showCriteria(),this._bindings=this._bindings.concat(this._products.bindings()),this._bindings.push({selector:"#"+this._products.elementId(),event:this._products.selectionChangedEvent(),object:this,method:"readjustSize"}),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}}]),r}(l),f=function(r){function o(){return e(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),i(o,[{key:"init",value:function(){var t=this;this._taxonomy=this._options.taxonomy,this._label=this._options.label,this._value=this._options.terms.value||new Array,this._minAmounts=this._options.terms.min_amounts||new Object,this._minItems=this._options.terms.min_items||new Object,this._inputElementId="dgfw_criteria_terms_"+this._id,this._inputElementName="dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",this._currency=decomGiftable.screen.data.currency,this._advancedContainerId="dgfw_criteria_terms_advanced_settings_"+this._id,this._advancedListId="dgfw_criteria_terms_"+this._id+"_advanced_list";var e=new Array,i={tag:"div",id:this._advancedListId,classes:["dgfw-advanced-posts"],children:[]};decomGiftable.screen.data.productCategories&&decomGiftable.screen.data.productCategories.forEach(function(i,s,n){e.push(t.termElement(i))}),this._elements=[{tag:"div",id:"dgfw_select_terms_"+this._id,classes:["dgfw-checkbox-group-wrapper"],children:e},{tag:"input",id:this._inputElementId+"_taxonomy",classes:["dgfw-products"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][taxonomy]",type:"hidden",value:this._taxonomy}}],this._value.length&&this._value.forEach(function(e,s){var n=t.productCategory(parseInt(e));n&&i.children.push(t.advancedProductCategoryElement(n,e))}),this._advancedElements=[{tag:"div",id:this._advancedContainerId,classes:["dgfw-advanced-wrapper"],children:[i]}],this._bindings.push({selector:".dgfw-terms-select-checkbox",event:"change",object:this,method:"toggleSelectTerm"},{selector:".dgfw-posts-selected-remove",event:"click",object:this,method:"removeSelectedTerm"}),s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this)}},{key:"advancedListId",value:function(){return this._advancedListId}},{key:"hookElements",value:function(){s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"hookElements",this).call(this),this._$advancedListElement=this._$advancedListElement||t(document.getElementById(this._advancedListId))}},{key:"termElement",value:function(t){var e={type:"checkbox",name:this._inputElementName+"[]",value:t.id};return this._value.forEach(function(i,s,n){parseInt(i)===t.id&&(e.checked="checked")}),{tag:"div",id:"dgfw_criteria_terms_"+this._id+"_term_"+t.id,classes:["dgfw-terms-select"],attributes:{"data-decom-id":t.id},children:[{tag:"input",id:"dgfw_terms_select_"+this._id+"_checkbox_"+t.id,classes:["dgfw-terms-select-checkbox"],attributes:e},{tag:"label",classes:["dgfw-terms-select-label"],text:t.title,attributes:{for:"dgfw_terms_select_"+this._id+"_checkbox_"+t.id}}]}}},{key:"productCategory",value:function t(e){var t=!1;return decomGiftable.screen.data.productCategories.forEach(function(i,s,n){i.id===e&&(t=i)}),t}},{key:"advancedProductCategoryElement",value:function(t,e){var i=["dgfw-posts-advanced-post","dgfw-terms-advanced-term"],s=this._id+"-min_amounts-"+t.id,n=this._minAmounts[t.id]?this._minAmounts[t.id].value:0,a=this._id+"-min_items-"+t.id,r=this._minItems[t.id]?this._minItems[t.id].value:1,o=new u(s,{currency:this._currency,label:d.text("Min amount"),value:n}),c=new p(a,{label:d.text("Min items"),value:r});return{tag:"div",id:"dgfw_criteria_posts_"+this._id+"_advanced_"+t.id,classes:i,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-posts-select-post-title"],text:t.title.length<20?t.title:t.title.slice(0,40)+"…"},{tag:"span",id:"dgfw_criteria_posts_advanced_remove_"+t.id,classes:["dgfw-posts-selected-remove","dashicons-before","dashicons-no"],attributes:{"data-decom-id":t.id}},{tag:"div",id:"dgfw_criteria_posts_advanced_options_"+t.id,classes:["dgfw-terms-advanced-options"],children:[{tag:"div",id:s+"_container",classes:["dgfw-terms-advanced-min-amount"],children:o.elements()},{tag:"div",id:a+"_container",classes:["dgfw-terms-advanced-min-items"],children:c.elements()}]}]}}},{key:"advancedElements",value:function(){return this._advancedElements}},{key:"toggleSelectTerm",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.val()),n=i.is(":checked");n?this.addToList(s):this.removeFromList(s)}},{key:"removeSelectedTerm",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.data("decom-id")),n=t(document.getElementById("dgfw_terms_select_"+this._id+"_checkbox_"+s));this.removeFromList(s),n.prop("checked",!1)}},{key:"addToList",value:function(t){var e=this.productCategory(t);this.createAndAppendChild(this._$advancedListElement,this.advancedProductCategoryElement(e))}},{key:"removeFromList",value:function(t){var e=this.$advancedTermElement(t);e.remove(),this.selectionChanged()}},{key:"$advancedTermElement",value:function(e){return t(document.getElementById("dgfw_criteria_posts_"+this._id+"_advanced_"+e))}},{key:"createAndAppendChild",value:function(e,i){var s=this,n=t(document.createElement(i.tag));if(n.attr("id",i.id),i.classes&&n.addClass(i.classes.join(" ")),i.attributes)for(var a in i.attributes)n.attr(a,i.attributes[a]);return i.text&&n.text(i.text),e.append(n),i.children&&i.children.forEach(function(t,e,i){s.createAndAppendChild(n,t)}),n}},{key:"selectionChangedEvent",value:function(){return"DGFW.SelectionChanged_"+this._id}},{key:"selectionChanged",value:function(){this._$advancedListElement.trigger(this.selectionChangedEvent())}}]),o}(h),y=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="product_categories",this._sourceCriteria&&this.takeOverFromSource(),this._terms=new f(this._id+"-terms",{label:d.text("Terms"),taxonomy:"product_cat",terms:!!this._conditions.terms&&this._conditions.terms}),this._steps=new Array,this._steps[0]={stepName:d.text("Select Product Categories"),description:d.text("Select product categories this gift category applies for."),help:d.text("This condition will be met if the customer has at least one product belonging to any of the selected product categories in their cart. To specify minimum amounts and/or items for each selected category, click the <strong>Amounts and Quantities</strong> button below."),elements:[{tag:"div",id:"dgfw_criteria_product_cats_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._terms.elements()}]},this._steps[1]={stepName:d.text("Amounts and Quantities"),description:d.text("Set up minimum amount and/or number of items for each selected category."),help:d.text("By default, this condition will be met if the customer has at least one product belonging to any of the selected product categories in their cart. You can change minimum amount and/or items for each selected category here. Leave the fields empty for default (one item minimum, regardless of the amount) value."),elements:[{tag:"div",id:"dgfw_criteria_product_cats_advanced_"+this._id,classes:["dgfw-criteria-input-container"],children:this._terms.advancedElements()}]},this.showCriteria(),this._bindings=this._bindings.concat(this._terms.bindings()),this._bindings.push({selector:"#"+this._terms.advancedListId(),event:this._terms.selectionChangedEvent(),object:this,method:"readjustSize"}),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}}]),r}(l),b=function(o){function c(){return e(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return n(c,o),i(c,[{key:"init",value:function(){var t=this;this._label=this._options.label,this._inputElementId="dgfw_criteria_users_"+this._id,this._containerId="dgfw_critera_users_select_"+this._id,this._selectedListId="dgfw_criteria_users_"+this._id+"_selected_list",this._navPrevId="dgfw_criteria_users_select_nav_prev_"+this._id,this._navNextId="dgfw_criteria_users_select_nav_next_"+this._id,this._statusCurrentPageId="dgfw_criteria_users_select_nav_status_current_"+this._id,this._statusTotalPagesId="dgfw_criteria_users_select_nav_status_total_"+this._id,this._value=new Object,this._options.value&&this._options.value.split(",").forEach(function(e){parseInt(e)&&(t._value[e]=e)}),this._currentPage=0,this._totalUsers=0,this._totalPages=1,this._usersPerPage=5;var e=new Array;decomGiftable.screen.data.users&&(this._totalUsers=decomGiftable.screen.data.users.length,this._totalPages=Math.ceil(this._totalUsers/this._usersPerPage),decomGiftable.screen.data.users.forEach(function(i,s,n){e[Math.floor(s/t._usersPerPage)]=e[Math.floor(s/t._usersPerPage)]||new Array,e[Math.floor(s/t._usersPerPage)].push(t.userElement(i))}));var i=new Array;e.forEach(function(e,s,n){i[s]={tag:"div",id:t._containerId+"_page_"+s,classes:["dgfw-select-users-container-page","page-"+s,0===s?"page-current":""],children:e}});var n={tag:"div",id:this._selectedListId,classes:["dgfw-selected-users"],children:[]};if(Object.keys(this._value).length)for(var a in this._value){var r=this.user(parseInt(a));this._value[a]&&r&&n.children.push(this.selectedUserElement(r,!1))}else n.classes.push("invisible");this._elements=[n,{tag:"div",id:this._containerId,classes:["dgfw-select-wrapper","dgfw-select-users","current-page-0"],children:i},{tag:"input",id:this._inputElementId,classes:["dgfw-users"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",type:"hidden",value:Object.keys(this._value).join(",")}}],this._totalPages>1&&this._elements.splice(1,0,{tag:"div",id:"dgfw_criteria_users_select_nav_"+this._id,classes:["dgfw-select-users-nav"],children:[{tag:"button",id:this._navPrevId,classes:["dgfw-select-users-nav-prev","button","dgfw-button-secondary","dashicons-before","dashicons-arrow-left"]},{tag:"span",id:"dgfw_criteria_select_nav_status_"+this._id,classes:["dgfw-select-users-nav-status"],children:[{tag:"span",id:"",classes:[],text:d.text("Page ")},{tag:"span",id:this._statusCurrentPageId,classes:["dgfw-select-users-nav-status-number"],text:this._currentPage+1},{tag:"span",id:"",classes:[],text:d.text(" of ")},{tag:"span",id:this._statusTotalPagesId,classes:["dgfw-select-users-nav-status-number"],text:this._totalPages}]},{tag:"button",id:this._navNextId,classes:["dgfw-select-users-nav-prev","button","dgfw-button-secondary","dashicons-before","dashicons-arrow-right"]}]}),this._bindings.push({selector:"#"+this._containerId,event:"mouseover",object:this,method:"loadNextPage"},{selector:"#"+this._navPrevId,event:"click",object:this,method:"previousPage"},{selector:"#"+this._navNextId,event:"click",object:this,method:"nextPage"},{selector:".dgfw-users-select-user",event:"click",object:this,method:"toggleSelectUser"},{selector:".dgfw-users-selected-remove",event:"click",object:this,method:"removeSelectedUser"}),s(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"init",this).call(this)}},{key:"hookElements",value:function(){s(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"hookElements",this).call(this),this._$containerElement=this._$containerElement||t(document.getElementById(this._containerId)),this._$selectedListElement=this._$selectedListElement||t(document.getElementById(this._selectedListId)),this._$currentPageStatus=this._$currentPageStatus||t(document.getElementById(this._statusCurrentPageId))}},{key:"containerId",value:function(){return this._containerId}},{key:"loadNextPage",value:function(){this.hookElements(),r.info("Loading more users...")}},{key:"userElement",value:function(t){var e=["dgfw-users-select-user"];return this._value[t.id]&&e.push("selected"),{tag:"div",id:"dgfw_criteria_users_"+this._id+"_user_"+t.id,classes:e,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-users-select-user-name"],text:t.displayName.length<30?t.displayName:t.displayName.slice(0,30)+"…"},{tag:"div",classes:["dgfw-users-select-user-img"],attributes:{style:"background-image: url("+t.img+");"}}]}}},{key:"selectedUserElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=["dgfw-users-selected-user"];return e&&i.push("invisible"),{tag:"div",id:"dgfw_criteria_users_"+this._id+"_selected_"+t.id,classes:i,attributes:{"data-decom-id":t.id},children:[{tag:"h4",classes:["dgfw-users-select-user-name"],text:t.displayName.length<30?t.displayName:t.displayName.slice(0,30)+"…"},{tag:"div",classes:["dgfw-users-select-user-img"],attributes:{style:"background-image: url("+t.img+");"}},{tag:"span",id:"dgfw_criteria_users_selected_remove_"+t.id,classes:["dgfw-users-selected-remove","dashicons-before","dashicons-no"],attributes:{"data-decom-id":t.id}}]}}},{key:"toggleSelectUser",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.data("decom-id"));i.toggleClass("selected"),this._value[s]?(delete this._value[s],this.removeFromList(s)):(this._value[s]=s,this.addToList(s)),this._$inputElement.val(Object.getOwnPropertyNames(this._value).join(","))}},{key:"removeSelectedUser",value:function(e){this.hookElements();var i=t(e.currentTarget),s=parseInt(i.data("decom-id"));i=t("#dgfw_criteria_users_"+this._id+"_user_"+s),i.removeClass("selected"),this._value[s]&&(delete this._value[s],this.removeFromList(s)),this._$inputElement.val(Object.getOwnPropertyNames(this._value).join(","))}},{key:"addToList",value:function(t){var e=this,i=this.user(t);this.createAndAppendChild(this._$selectedListElement,this.selectedUserElement(i)),setTimeout(function(){e._$selectedListElement.removeClass("invisible"),e.$userElement(t).removeClass("invisible"),setTimeout(function(){e.selectionChanged()},300)},50)}},{key:"removeFromList",value:function(t){var e=this,i=this.$userElement(t);i.addClass("invisible"),setTimeout(function(){0===Object.keys(e._value).length&&e._$selectedListElement.addClass("invisible"),i.remove(),setTimeout(function(){e.selectionChanged()},300)},50)}},{key:"selectionChangedEvent",value:function(){return"DGFW.SelectionChanged_"+this._id}},{key:"selectionChanged",value:function(){this._$inputElement.trigger(this.selectionChangedEvent())}},{key:"user",value:function t(e){var t=!1;return decomGiftable.screen.data.users.forEach(function(i,s,n){i.id===e&&(t=i)}),t}},{key:"$userElement",value:function(e){return t(document.getElementById("dgfw_criteria_users_"+this._id+"_selected_"+e))}},{key:"createAndAppendChild",value:function(e,i){var s=this,n=t(document.createElement(i.tag));if(n.attr("id",i.id),i.classes&&n.addClass(i.classes.join(" ")),i.attributes)for(var a in i.attributes)n.attr(a,i.attributes[a]);return i.text&&n.text(i.text),e.append(n),i.children&&i.children.forEach(function(t,e,i){s.createAndAppendChild(n,t)}),n}},{key:"previousPage",value:function(){this.hookElements(),this._currentPage-=this._currentPage>0?1:0,this._$containerElement.find(".page-"+(this._currentPage+1)).removeClass("page-current"),this._$containerElement.find(".page-"+this._currentPage).removeClass("page-prev").addClass("page-current"),this.updateCurrentPageStatus()}},{key:"nextPage",value:function(){this.hookElements(),this._currentPage+=this._currentPage<this._totalPages-1?1:0,this._$containerElement.find(".page-"+(this._currentPage-1)).removeClass("page-current").addClass("page-prev"),this._$containerElement.find(".page-"+this._currentPage).addClass("page-current"),this.updateCurrentPageStatus()}},{key:"updateCurrentPageStatus",value:function(){this.hookElements(),this._$currentPageStatus.text(this._currentPage+1)}}]),c}(h),w=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="users",this._sourceCriteria&&this.takeOverFromSource(),this._users=new b(this._id+"-users",{label:d.text("Users"),value:!!this._conditions.users&&this._conditions.users.value}),this._steps=new Array;var t=this._users.elements();this._steps[0]={description:d.text("Select users this gift category applies for."),help:d.text("This condition will be met if the customer is any of the selected users."),elements:[{tag:"div",id:"dgfw_criteria_users_container_"+this._id,classes:["dgfw-criteria-input-container"],children:t}]},this.showCriteria(),this._bindings=this._bindings.concat(this._users.bindings()),this._bindings.push({selector:"#"+this._users.elementId(),event:this._users.selectionChangedEvent(),object:this,method:"readjustSize"}),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}}]),r}(l),E=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){var t=this;this._label=this._options.label,this._inputElementId="dgfw_criteria_roles_"+this._id,this._inputElementName="dgfw_criteria["+this._id.toString().split("-").join("][")+"][value]",this._value=this._options.value||new Array;var e=new Array;decomGiftable.screen.data.roles&&decomGiftable.screen.data.roles.forEach(function(i,s,n){e.push(t.roleElement(i))}),this._elements=[{tag:"div",id:"dgfw_select_roles_"+this._id,classes:["dgfw-checkbox-group-wrapper"],children:e}],s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}},{key:"roleElement",value:function(t){var e={type:"checkbox",name:this._inputElementName+"[]",value:t.name};return this._value.forEach(function(i,s,n){i===t.name&&(e.checked="checked")}),{tag:"div",id:"dgfw_criteria_roles_"+this._id+"_role_"+t.name,classes:["dgfw-roles-select"],attributes:{"data-decom-id":t.name},children:[{tag:"input",id:"dgfw_roles_select_"+this._id+"_checkbox_"+t.name,classes:["dgfw-roles-select-checkbox"],attributes:e},{tag:"label",classes:["dgfw-roles-select-label"],text:t.title,attributes:{for:"dgfw_roles_select_"+this._id+"_checkbox_"+t.name}}]}}}]),r}(h),k=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="user_roles",this._sourceCriteria&&this.takeOverFromSource(),this._roles=new E(this._id+"-roles",{label:d.text("Roles"),value:!!this._conditions.roles&&this._conditions.roles.value}),this._steps=new Array,this._steps[0]={description:d.text("Select user roles this gift category applies for."),help:d.text("This condition will be met if the customr is a logged in ser and has one of the user roles selected below."),elements:[{tag:"div",id:"dgfw_criteria_roles_container_"+this._id,classes:["dgfw-criteria-input-container"],children:this._roles.elements()}]},this.showCriteria(),this._bindings=this._bindings.concat(this._roles.bindings()),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}}]),r}(l),x=function(r){function o(){return e(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),i(o,[{key:"init",value:function(){if(this._label=this._options.label,this._dateInputElementId="dgfw_criteria_date_"+this._id,this._timeInputElementId="dgfw_criteria_time_"+this._id,this._value=new Object,this._options.value)this._value=this._options.value;else{var t=new Date,e=new Object;e.dd=t.getDate(),e.mm=t.getMonth()+1,e.yyyy=t.getFullYear(),e.hh=t.getHours(),e.ii=t.getMinutes();for(var i in e)e[i]<10&&(e[i]="0"+e[i]);this._value.date=e.yyyy+"-"+e.mm+"-"+e.dd,this._value.time=e.hh+":"+e.ii}this._elements=[{tag:"label",id:"dgfw_criteria_date_label_"+this._id,classes:["dgfw-label-date"],text:this._label,attributes:{for:this._dateInputElementId}},{tag:"input",id:this._dateInputElementId,classes:["dgfw-date"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value][date]",type:"date",value:this._value.date}},{tag:"label",id:"dgfw_criteria_time_label_"+this._id,classes:["dgfw-label-time"],text:d.text(" at "),attributes:{for:this._timeInputElementId}},{tag:"input",id:this._timeInputElementId,classes:["dgfw-time"],attributes:{name:"dgfw_criteria["+this._id.toString().split("-").join("][")+"][value][time]",type:"time",value:this._value.time}}],s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this)}},{key:"hookElements",value:function(){this._$dateInputElement=this._$dateInputElement||t(document.getElementById(this._dateInputElementId)),this._$timeInputElement=this._$timeInputElement||t(document.getElementById(this._timeInputElementId))}},{key:"dateElementId",value:function(){return this._dateInputElementId}},{key:"timeElementId",value:function(){return this._timeInputElementId}},{key:"updateDate",value:function(){this.hookElements(),this._value.date=this._$dateInputElement.val()}},{key:"updateTime",value:function(){this.hookElements(),this._value.time=this._$timeInputElement.val()}}]),o}(h),C=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._type="periods",this._sourceCriteria&&this.takeOverFromSource(),this._start=new x(this._id+"-start",{label:d.text("Start date"),value:!!this._conditions.start&&this._conditions.start.value}),this._end=new x(this._id+"-end",{label:d.text("End date"),value:!!this._conditions.end&&this._conditions.end.value}),this._steps=new Array,this._steps[0]={description:d.text("Set start and end of this period."),help:d.text("This condition will be met if the time of customer checkout is within the defined start/end time interval."),elements:[{tag:"div",id:"dgfw_criteria_periods_start_container_"+this._id,classes:["dgfw-criteria-input-container","dgfw-criteria-period-container"],children:this._start.elements()},{tag:"div",id:"dgfw_criteria_periods_end_container_"+this._id,classes:["dgfw-criteria-input-container","dgfw-criteria-period-container"],children:this._end.elements()}]},this.showCriteria(),this._bindings.push({selector:"#"+this._start.dateElementId(),event:"focusout",object:this,method:"updateStartDate"},{selector:"#"+this._start.timeElementId(),event:"focusout",object:this,method:"updateStartTime"},{selector:"#"+this._end.dateElementId(),event:"focusout",object:this,method:"updateEndDate"},{selector:"#"+this._end.timeElementId(),event:"focusout",object:this,method:"updateEndTime"}),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}},{key:"updateStartDate",value:function(){this._start.updateDate()}},{key:"updateStartTime",value:function(){this._start.updateTime()}},{key:"updateEndDate",value:function(){this._end.updateDate()}},{key:"updateEndTime",value:function(){this._end.updateTime()}}]),r}(l),I=new Map([["amounts",_],["items",m],["periods",C],["products",v],["product_categories",y],["users",w],["user_roles",k],["default",_]]),$=function(){function t(){e(this,t)}return i(t,null,[{key:"create",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return I.has(e)||(e="default"),new(I.get(e))(t,i)}},{key:"createAndScrollTo",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.scrollTo=!0,this.create(t,e,i)}},{key:"createFrom",value:function(t,e){return I.has(e)||(e="default"),new(I.get(e))(t.id(),t.conditions(),t)}}]),t}(),S=function(){function s(i){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e(this,s),this._id=i.id,this._name=i.name,this._bound=new Array,this._$element=t(document.getElementById(i.elementId)),this._$description=t(document.getElementById(i.descriptionId)),this._$addButton=t(document.getElementById(i.addButtonId)),this._criteria=new Map,n){var a=$.create(n.id,n.type,n);this._criteria.set(this._criteria.size.toString(),a),t("#dgfw-loading").fadeOut(),this.updateDescription(),this.appendCriteriaElement(a.element()),this._bound.push(new o(this._$element,a.elementSelector(),a.changeTypeEvent(),this,"changeCriteriaType")),this._bound.push(new o(this._$element,a.elementSelector(),a.removeEvent(),this,"removeCriteria"))}}return i(s,[{key:"addCriteria",
value:function(){var t=new _(this._criteria.size,{scrollTo:!0});this._criteria.set(this._criteria.size.toString(),t),this.updateDescription(),this._$addButton.hide(),this.appendCriteriaElement(t.element()),this._bound.push(new o(this._$element,t.elementSelector(),t.changeTypeEvent(),this,"changeCriteriaType")),this._bound.push(new o(this._$element,t.elementSelector(),t.removeEvent(),this,"removeCriteria"))}},{key:"removeCriteria",value:function(t,e){var i=this._criteria.get(e);this._criteria.delete(e),i.removeElement(),this.unbindSelector(i.elementSelector()),this.updateDescription(),this._$addButton.show()}},{key:"updateDescription",value:function(){var t="";this._$description.text(t)}},{key:"appendCriteriaElement",value:function(t){this._$description.after(t)}},{key:"changeCriteriaType",value:function(t,e,i){var s=new $.createFrom(this._criteria.get(e),i);this._criteria.set(e,s)}},{key:"unbindSelector",value:function(t){var e=new Array;this._bound.forEach(function(i,s){i.selector()===t?i.unbind():e.push(i)}),this._bound=e}}]),s}(),P=function(t){function r(){return e(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return n(r,t),i(r,[{key:"init",value:function(){this._category=new S(this._data.category,this._data.criteria),this._bindings.push({selector:"#dgfw_add_criteria",event:"click",object:this,method:"addCriteria"}),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"init",this).call(this)}},{key:"addCriteria",value:function(){this._category.addCriteria()}}]),r}(c),O=function(r){function o(){return e(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),i(o,[{key:"init",value:function(){this._giftableOptionId="_dgfw_giftable",this._productTypeSelectId="product-type",this._hasGiftableVariationsId="_dgfw_has_giftable_variations",this._$giftableOption=t(document.getElementById(this._giftableOptionId)),this._$producTypeSelect=t(document.getElementById(this._productTypeSelectId)),this._$hasGiftableVariations=t(document.getElementById(this._hasGiftableVariationsId)),this._bindings.push({selector:"#"+this._giftableOptionId,event:"change",object:this,method:"toggleGiftable"},{selector:"#"+this._productTypeSelectId,event:"change",object:this,method:"productTypeChange"},{selector:"#_virtual, #_downloadable",event:"change",object:this,method:"productTypeChange"},{selector:"input.variable_is_giftable",event:"change",object:this,method:"toggleGiftable"},{selector:"#woocommerce-product-data",event:"woocommerce_variations_loaded",object:this,method:"toggleGiftable"}),s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this)}},{key:"toggleGiftable",value:function(){var e,i,s,n=!1;s=t("input.variable_is_giftable");for(var a=0;a<s.length;a++){var r=t(s[a]),o=r.closest(".woocommerce_variation").find(".dgfw_giftable_label");r.prop("checked")?(n=!0,this._$hasGiftableVariations.val("yes"),o.length||r.closest(".woocommerce_variation").find("h3").append(this.giftableVariationLabel())):o.remove()}s.length&&!n&&this._$hasGiftableVariations.val("no"),this._$giftableOption.prop("checked")||s.length&&n||"yes"===this._$hasGiftableVariations.val()?(e="show_if",i="hide_if"):(e="hide_if",i="show_if"),t(document.getElementsByClassName(e+this._giftableOptionId)).show(),t(document.getElementsByClassName(i+this._giftableOptionId)).hide(),this._$giftableOption.prop("checked")||"yes"!==this._$hasGiftableVariations.val()?t(document.getElementsByClassName("show_if_has_giftable_variations_only")).hide():t(document.getElementsByClassName("show_if_has_giftable_variations_only")).show()}},{key:"productTypeChange",value:function(){this._$giftableOption.is(":visible")&&this.toggleGiftable()}},{key:"giftableVariationLabel",value:function(){return'<strong class="dgfw_giftable_label">('+d.text("Giftable")+")</strong>"}}]),o}(c),j=new Map([["edit-category",P],["edit-product",O]]),T=function(){function t(){e(this,t)}return i(t,null,[{key:"create",value:function(t){if(j.has(t.name))return new(j.get(t.name))(t.data)}}]),t}(),A=function(){function t(){e(this,t),decomGiftable&&decomGiftable.screen&&(this._screen=T.create(decomGiftable.screen),this.init())}return i(t,[{key:"init",value:function(){r.info("Giftable for WooCommerce initialized.")}}]),t}();new A}();